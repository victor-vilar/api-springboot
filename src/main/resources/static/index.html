<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org>
<head>
  <meta charset=" UTF-8">
<title>Cadastro SpringBoot</title>
</head>
<body>
    <h1>Cadastro de Clientes</h1>
    <form method="post" action="customers">
        <label for="nameCompanyName">Nome:</label>
        <input type="text" name="nameCompanyName" id="nameCompanyName"><br>
        <label for="cpfCnpj">CPF/CNPJ:</label>
        <input type="text" name="cpfCnpj" id="cpfCnpj"><br>
        <input type="button" id="enviar" value="Cadastrar">
    </form>
        <button onclick="exibirClientes()">Mostrar Clientes</button>
</body>
<script>

    
    let bt = document.getElementById("enviar");
    bt.addEventListener('click', cadastrar);
        

    function exibirClientes(){
        fetch('http://localhost:8080/customers')
        .then(response => response.json())
        .then(data => console.log(data));
    }

    function cadastrar(){
        
        let cliente = {
            "nameCompanyName" : document.getElementById('nameCompanyName').value,
            "cpfCnpj": document.getElementById('cpfCnpj').value 
        }

        fetch("http://localhost:8080/customers", {
            method:"POST",
            headers:{
                'Accept': 'application/json',
                'Content-Type': 'application/json'},
            body:JSON.stringify(cliente),
            //mode: 'no-cors'
        })
        .then((response) => response.json())
        .then((json) => console.log(json));

        msgTerminado();

    };

    function msgTerminado(){
        console.log('Terminei');
    }


    
    
    

</script>
</html>